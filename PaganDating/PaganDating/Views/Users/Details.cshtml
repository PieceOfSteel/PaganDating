@model DataLayer.User

@{
    ViewBag.Title = Model.Name;
    var image = Model.ProfileImage;
    var messages = Model.Inbox.ToList();
}

<h2>@ViewBag.Title</h2>

<div>
    <h4></h4>
    <hr />
    <img class="profile" src=@image alt="Alternate Text" width="250" height="250" />
    <h4>
        @Html.DisplayNameFor(model => model.Description)
    </h4>

    <p>
        @Html.DisplayFor(model => model.Description)
    </p>

    <h4>Messages</h4>
    <dl class="dl-horizontal">
        @foreach (DataLayer.Message message in messages)
        {
            <dt>
                @message.Author.Name
            </dt>

            <dd>
                @message.Content
            </dd>
        }
    </dl> 
    <h4>Friends</h4>
    <dl id="friendlist" class ="dl-horizontal">
        
    </dl>
    <h4>Friend requests</h4>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            var friends = $.get('api/friendships/getFriends?userId=' + @Model.Id);
            friends.forEach(function (friend) {
                $('#friendlist').append(friend);
            })
        }
    </script>
    }
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
    @Html.ActionLink("Back to List", "Index")
</p>
